{% extends "base.html" %} {% block title %} Ticket Details {% endblock %} {%
block content %}
<h2>Ticket Details</h2>

<div class="form">
  <p>Subject: {{ ticket.subject }}</p>
  <p>Description: {{ ticket.description }}</p>
  <p>Status: {{ ticket.status }}</p>
  <p>Priority: {{ ticket.priority }}</p>
  <p>Estimated Time (in hours): {{ ticket.estimated_time }}</p>
  <p>Date Created: {{ ticket.date_created.strftime('%d-%m-%Y %H:%M:%S') }}</p>
  <p>
    Last Updated: {{ ticket.date_updated.strftime('%d-%m-%Y %H:%M:%S') if
    ticket.date_updated else "Never" }}
  </p>
  {% if current_user.account_type == 'Administrator' %}
  <p>Created By: {{ ticket.user.forename }} {{ ticket.user.surname }}</p>
  {% endif %}
</div>
<br>
<div class="btn-group">
  <a href="{{ url_for('home.home') }}" class="btn btn-group btn-secondary"
    >Back</a
  >

  {% if current_user.account_type == 'admin' %}
  <form
    action="{{ url_for('tickets.delete_ticket', ticket_id=ticket.id) }}"
    method="POST"
    onsubmit="return confirm('Are you sure you want to delete this ticket?');"
  >
    <button type="submit" class="btn btn-group btn-danger">Delete</button>
  </form>
  {% endif %}

  <a
    href="{{ url_for('tickets.edit_ticket', ticket_id=ticket.id) }}"
    class="btn btn-group btn-primary"
    >Edit</a
  >
</div>
{% endblock %}
